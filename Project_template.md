# Project_template

Тип: Материал
Родитель: Описание проекта для 11 когорты (https://www.notion.so/11-03abbbbc8bcb49ed9b85c9b6d1174056?pvs=21)


# Задание 1. Анализ и планирование

### 1. Описание функциональности монолитного приложения

**Управление отоплением:**

- Пользователи могут удаленно включать и выключать отопление в своих домах через веб-интерфейс.
- Система поддерживает управление переключение реле отопления, установленных в домах.
- Система поддерживает подключение дополнительных реле отопления в домах с выездом специалиста.

**Мониторинг температуры:**

- Пользователи могут просматривать текущую температуру в своих домах через веб-интерфейс.
- Система поддерживает получение данные о температуре с датчиков, установленных в домах.
- Система поддерживает подключение дополнительных датчиков температуры в домах с выездом специалиста.

### 2. Анализ архитектуры монолитного приложения

- Язык программирования: Java.
- База данных: PostgreSQL.
- Архитектура: Монолитная, все компоненты системы (обработка запросов, бизнес-логика, работа с данными) находятся в рамках одного приложения.
- Взаимодействие: Синхронное, запросы обрабатываются последовательно. Сервер -> датчик, сервер -> реле.
- Масштабируемость: Ограничена, так как монолит сложно масштабировать по частям.
- Развёртывание: Требует остановки всего приложения.

### 3. Определение доменов и границы контекстов

- Домен "Управление устройствами" - все, что связано с передачей команд на устройста и получение от них статуса.
  - Поддомен "Передача команд на устройства"
  - Поддомен "Получение статуса с устройств"
  - Поддомен "Подключение новых устройств"
- Домен "Управление метриками с устройств" - все, что связано с получением метрик/статусов с устройств.
  - Поддомен "Сбор показаний с датчиков и ведение журнала"
  - Поддомен "Просмотр журнала показаний"
  - Поддомен "Настройка агрегации и визуализации метрик"
- Домен "Автоматизация и алертинг" - все, что связано с автоматизацией умного дома и алертингом.
  - Поддомен "Настройка правил автоматизации"
  - Поддомен "Шедулинг и обработка событий по правилам"
  - Поддомен "Уведомления пользователей"
- Домен "Управление пользователями" - все, что связано с управлением пользователями системы (владельцы устройств, администраторы), авторизацией и аутентификацией.
  - Поддомен "Регистрация и вход"
  - Поддомен "Ролевая модель и авторизация"

### **4. Проблемы монолитного решения**

- Монолитное решение с одним сервисом и одной БД будет очень сложно масштабировать и итеративно дорабатывать.
- Для подключения новых устройств требуется выезд специалиста, что потребует многократного увеличения штата для выполнения новых целей бизнеса.
- Архитектура с синхронными взаимодействиями требует пересмотра, так как на объемах взаимодействий, значительно превышающих текущие (100 модулей и 100 пользователей), система перестанет выполнять требования по доступности и надежности.
- Развертывание текущего решения требует остановки всей системы, как следствие недоступность системы будет усугубляться с ростом функциональности, что будет приводить к ее неконкуретноспособности и ухудшению позиций на рынке.

### 5. Визуализация контекста системы — диаграмма С4

```markdown
[Диаграмма контекста C4](https://github.com/SplattyOne/yandex-arch-sprint-3/blob/warmhouse/diagrams/C4_context.png)
```

# Задание 2. Проектирование микросервисной архитектуры

В этом задании вам нужно предоставить только диаграммы в модели C4. Мы не просим вас отдельно описывать получившиеся микросервисы и то, как вы определили взаимодействия между компонентами To-Be системы. Если вы правильно подготовите диаграммы C4, они и так это покажут.

**Диаграмма контейнеров (Containers)**

```markdown
[Диаграмма контейнеров C4](https://github.com/SplattyOne/yandex-arch-sprint-3/blob/warmhouse/diagrams/C4_container.png)
```

**Диаграмма компонентов (Components)**

```markdown
[Диаграмма компонентов C4](https://github.com/SplattyOne/yandex-arch-sprint-3/blob/warmhouse/diagrams/C4_component.png)
```

**Диаграмма кода (Code)**

```markdown
[Диаграмма кода C4](https://github.com/SplattyOne/yandex-arch-sprint-3/blob/warmhouse/diagrams/C4_code.png)
```

# Задание 3. Разработка ER-диаграммы

```markdown
[Диаграмма кода C4](https://github.com/SplattyOne/yandex-arch-sprint-3/blob/warmhouse/diagrams/ER_diagram.png)
```

# ✅ Задание 4. Создание и документирование API

### 1. Тип API

Для взаимодействия с удаленными устройствами умного дома (получение метрик с устройств и отправка на них команд) выбрано асинхронное взаимодействие с использованием брокера Apache Kafka. Это позволит масштабировать количество устройств в системе и подключенных клиентов без потери производительности и надежности.

### 2. Документация API

```markdown
[AsyncAPI спецификация](https://github.com/SplattyOne/yandex-arch-sprint-3/blob/warmhouse/docs/asyncapi.yaml)
```
